
<!DOCTYPE html>
<html lang="en ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eric的博客 || My personal blog</title>
    <meta name="author" content="Eric Du">
    <meta name="description" content="记录、分享、交流 ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/head_image.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/full-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Eric的博客" type="application/atom+xml">
</head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Eric的博客</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>about</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/like/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/like/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
        <a target="_blank" rel="noopener" href="https://en.korilin.com">
            <span>
                <a-icon type="compass" theme="filled" />
            </span>
            <span>英文博客</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Eric的博客</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/like/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/like/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
            <a target="_blank" rel="noopener" href="https://en.korilin.com">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="compass" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">英文博客</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                    <div id="home-head" style=background-image:url('home.jpg')>
    <script>
        var menu = document.getElementById("menu")
        menu.className += " menu-color"
    </script>
     
    <div id="home-info" class="home-info" @click="home_click">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>Eric的博客</h1>
                <h3>My personal blog</h3>
                <h5>记录、分享、交流</h5>
            </div>
        </span>
    </div>
     
</div>



<div id="home-posts-wrap" class=>
    <div id="home-posts">

        <div id="posts">
            

<div class="post">

    <a href="/2022/05/16/资料/arthas手册/">
        <h2>
            Hexo博客搭建
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/博客相关">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                博客相关
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/5/16
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h3 id="Windows系统"><a href="#Windows系统" class="headerlink" title="Windows系统"></a>Windows系统</h3><ol>
<li><p>jdk路径下打开jvisualvm.exe软件</p>
<p><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20210630143317123.png" alt="image-20210630143317123"></p>
</li>
<li><p>找到对应进程pid</p>
<p><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20210630143445508.png" alt="image-20210630143445508"></p>
</li>
<li><p>进入arthas安装目录，cmd进入命令行，输入命令</p>
<pre><code>as.bat 16268
</code></pre>
<p>其中16268为对应进程的pid</p>
<p><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20210630143804200.png" alt="image-20210630143804200"></p>
</li>
<li><p>输入对应命令观察方法耗时情况</p>
<p><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20210630143848120.png" alt="image-20210630143848120"></p>
</li>
</ol>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/基础" style=color:#ffa2c4>
                基础
            </a>
        </span>
        
    </div>

    <a href="/2022/05/16/资料/arthas手册/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/05/16/资料/图床测试/">
        <h2>
            图床测试
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/其他">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                其他
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/5/16
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <p><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20220417015354895.png" alt="image-20220417015354895"><img src="https://gitee.com/dxf136/blog-image/raw/master/img/image-20220417015239591.png" alt="image-20220417015239591"></p>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/基础" style=color:#03a9f4>
                基础
            </a>
        </span>
        
    </div>

    <a href="/2022/05/16/资料/图床测试/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/04/24/资料/博客搭建/">
        <h2>
            Hexo博客搭建
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/博客相关">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                博客相关
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/4/24
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <p>博客路径</p>
<p>E:Blog</p>
<p>Hexo博客搭建教程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/745eacc56227">https://www.jianshu.com/p/745eacc56227</a></p>
<p>博客主题参考地址</p>
<p><a target="_blank" rel="noopener" href="https://korilin.github.io/hexo-theme-particle-demo/full/public/">https://korilin.github.io/hexo-theme-particle-demo/full/public/</a></p>
<p>部署命令</p>
<pre><code class="bash">hexo g
</code></pre>
<p>发布本地命令</p>
<pre><code class="bash">hexo s
</code></pre>
<p>发布GitHub命令</p>
<pre><code class="bash">hexo d
</code></pre>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/基础" style=color:#00bcd4>
                基础
            </a>
        </span>
        
    </div>

    <a href="/2022/04/24/资料/博客搭建/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/04/22/Nginx/Nginx使用记录/">
        <h2>
            Nginx常用命令
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/Nginx">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                Nginx
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/4/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h1 id="Nginx常用命令"><a href="#Nginx常用命令" class="headerlink" title="Nginx常用命令"></a>Nginx常用命令</h1><h3 id="启动命令"><a href="#启动命令" class="headerlink" title="启动命令"></a>启动命令</h3><pre><code>nginx -c /etc/nginx/conf/nginx.conf
</code></pre>
<h3 id="关闭命令"><a href="#关闭命令" class="headerlink" title="关闭命令"></a>关闭命令</h3><pre><code>ps -ef|grep nginx
kill -QUIT 2072
</code></pre>
<h3 id="配置文件检测"><a href="#配置文件检测" class="headerlink" title="配置文件检测"></a>配置文件检测</h3><pre><code>nginx -t
</code></pre>
<h3 id="重新加载配置文件"><a href="#重新加载配置文件" class="headerlink" title="重新加载配置文件"></a>重新加载配置文件</h3><pre><code>nginx -s reload
</code></pre>
<h3 id="nginx配置location-x3D-x2F-uri-x2F-…-用法"><a href="#nginx配置location-x3D-x2F-uri-x2F-…-用法" class="headerlink" title="nginx配置location [&#x3D;||*|^~] &#x2F;uri&#x2F; { … }用法"></a>nginx配置location [&#x3D;|<del>|</del>*|^~] &#x2F;uri&#x2F; { … }用法</h3><ul>
<li><p>&#x3D; 严格匹配。如果这个查询匹配，那么将停止搜索并立即处理此请求。</p>
</li>
<li><p>~ 为区分大小写匹配(可用正则表达式)</p>
</li>
<li><p>!~为区分大小写不匹配</p>
</li>
<li><p>~* 为不区分大小写匹配(可用正则表达式)</p>
</li>
<li><p>!~*为不区分大小写不匹配</p>
</li>
<li><p>^~ 如果把这个前缀用于一个常规字符串,那么告诉nginx 如果路径匹配那么不测试正则表达式。</p>
<h6 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h6></li>
</ul>
<p>location &#x3D; &#x2F; {</p>
<p># 只匹配 &#x2F; 查询。</p>
<p>}</p>
<p>location &#x2F; {</p>
<p># 匹配任何查询，因为所有请求都以 &#x2F; 开头。但是正则表达式规则和长的块规则将被优先和查询匹配。</p>
<p>}</p>
<p>location ^~ &#x2F;p_w_picpaths&#x2F; {</p>
<p># 匹配任何以 &#x2F;p_w_picpaths&#x2F; 开头的任何查询并且停止搜索。任何正则表达式将不会被测试。</p>
<p>}</p>
<p>location ~*.(gif|jpg|jpeg)$ {</p>
<p># 匹配任何以 gif、jpg 或 jpeg 结尾的请求。</p>
<p>}</p>
<p>location ~*.(gif|jpg|swf)$ {</p>
<p>valid_referers none blocked start.igrow.cn sta.igrow.cn;</p>
<p>if ($invalid_referer) {</p>
<p>#防盗链</p>
<p>rewrite ^&#x2F; http:&#x2F;&#x2F;$host&#x2F;logo.png;</p>
<p>}</p>
<p>}</p>
<h3 id="proxy-pass"><a href="#proxy-pass" class="headerlink" title="proxy_pass"></a>proxy_pass</h3><p>在nginx中配置proxy_pass代理转发时，如果在proxy_pass后面的url加&#x2F;，表示绝对根路径；如果没有&#x2F;，表示相对路径，把匹配的路径部分也给代理走。</p>
<p>假设下面四种情况分别用 <a target="_blank" rel="noopener" href="http://192.168.1.1/proxy/test.html">http://192.168.1.1/proxy/test.html</a> 进行访问。</p>
<h5 id="第一种："><a href="#第一种：" class="headerlink" title="第一种："></a>第一种：</h5><p>location &#x2F;proxy&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1/">http://127.0.0.1/</a>;<br>}<br>代理到URL：<a target="_blank" rel="noopener" href="http://127.0.0.1/test.html">http://127.0.0.1/test.html</a></p>
<h5 id="第二种（相对于第一种，最后少一个-x2F-）"><a href="#第二种（相对于第一种，最后少一个-x2F-）" class="headerlink" title="第二种（相对于第一种，最后少一个 &#x2F; ）"></a>第二种（相对于第一种，最后少一个 &#x2F; ）</h5><p>location &#x2F;proxy&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1/">http://127.0.0.1</a>;<br>}<br>代理到URL：<a target="_blank" rel="noopener" href="http://127.0.0.1/proxy/test.html">http://127.0.0.1/proxy/test.html</a></p>
<h5 id="第三种："><a href="#第三种：" class="headerlink" title="第三种："></a>第三种：</h5><p>location &#x2F;proxy&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1/aaa/">http://127.0.0.1/aaa/</a>;<br>}<br>代理到URL：<a target="_blank" rel="noopener" href="http://127.0.0.1/aaa/test.html">http://127.0.0.1/aaa/test.html</a></p>
<h5 id="第四种（相对于第三种，最后少一个-x2F-）"><a href="#第四种（相对于第三种，最后少一个-x2F-）" class="headerlink" title="第四种（相对于第三种，最后少一个 &#x2F; ）"></a>第四种（相对于第三种，最后少一个 &#x2F; ）</h5><p>location &#x2F;proxy&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1/aaa">http://127.0.0.1/aaa</a>;<br>}<br>代理到URL：<a target="_blank" rel="noopener" href="http://127.0.0.1/aaatest.html">http://127.0.0.1/aaatest.html</a></p>
<h3 id="rewrite-最后一项flag参数："><a href="#rewrite-最后一项flag参数：" class="headerlink" title="rewrite 最后一项flag参数："></a>rewrite 最后一项flag参数：</h3><ul>
<li>last</li>
</ul>
<ol>
<li>结束当前的请求处理，用替换后的URI重新匹配location；</li>
<li>可理解为重写（rewrite）后，发起了一个新请求，进入server模块，匹配location；</li>
<li>如果重新匹配循环的次数超过10次，nginx会返回500错误；</li>
<li>返回302 http状态码 ；</li>
<li>浏览器地址栏显示重地向后的url</li>
</ol>
<ul>
<li>break</li>
</ul>
<ol>
<li>结束当前的请求处理，使用当前资源，不在执行location里余下的语句；</li>
<li>返回302 http状态码 ；</li>
<li>浏览器地址栏显示重地向后的url</li>
</ol>
<ul>
<li>redirect</li>
</ul>
<ol>
<li>临时跳转，返回302 http状态码；</li>
<li>浏览器地址栏显示重地向后的url</li>
</ol>
<ul>
<li>permanent</li>
</ul>
<ol>
<li>永久跳转，返回301 http状态码；</li>
<li>浏览器地址栏显示重定向后的url</li>
</ol>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><ul>
<li><p>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-service/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-service/travel/lostFound/list</a></p>
</li>
<li><p>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:9999/travel-service/travel/lostFound/list">http://192.16.1.144:9999/travel-service/travel/lostFound/list</a></p>
<p>  location ^~ &#x2F;api&#x2F;lostFound-service {<br>  proxy_pass <a target="_blank" rel="noopener" href="http://192.16.1.144:9999/travel-service">http://192.16.1.144:9999/travel-service</a>;<br>  proxy_redirect off;<br>  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;<br>  proxy_read_timeout 180s;<br>  #proxy_set_header Host $proxy_host;<br>  }</p>
</li>
<li><p>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic1/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic1/travel/lostFound/list</a></p>
</li>
<li><p>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:8767/travel/lostFound/list">http://192.16.1.144:8767/travel/lostFound/list</a></p>
</li>
</ul>
<pre><code>location ^~ /api/lostFound-servic1/ &#123;
    proxy_pass http://192.16.1.144:8767/;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>
<ul>
<li>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic2/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic2/travel/lostFound/list</a></li>
<li>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:8767/api/lostFound-servic2/travel/lostFound/list">http://192.16.1.144:8767/api/lostFound-servic2/travel/lostFound/list</a> (可以发现这种方式只修改location匹配字段前面的信息)</li>
</ul>
<pre><code>location ^~ /api/lostFound-servic2/ &#123;
    proxy_pass http://192.16.1.144:8767;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>
<ul>
<li>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic3/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic3/travel/lostFound/list</a></li>
<li>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:8767/travel/lostFound/list">http://192.16.1.144:8767/travel/lostFound/list</a></li>
</ul>
<pre><code>location ^~ /api/lostFound-servic3 &#123;
    rewrite /api/lostFound-servic3/(.*) /$1 break;
    proxy_pass http://192.16.1.144:8767;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>
<ul>
<li>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic4/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic4/travel/lostFound/list</a></li>
<li>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:9999/travel-service/travel/lostFound/list">http://192.16.1.144:9999/travel-service/travel/lostFound/list</a></li>
</ul>
<pre><code>location ^~ /api/lostFound-servic4/ &#123;
    proxy_pass http://192.16.1.144:9999/travel-service/;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>
<ul>
<li>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic5/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic5/travel/lostFound/list</a></li>
<li>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:9999/travel-service/travel/lostFound/list">http://192.16.1.144:9999/travel-service/travel/lostFound/list</a></li>
<li>类比上一条可以发现：location和proxy_pass结尾都写<code>/</code>等价于都不写</li>
</ul>
<pre><code>location ^~ /api/lostFound-servic5 &#123;
    proxy_pass http://192.16.1.144:9999/travel-service;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>
<ul>
<li>访问Url：   <a target="_blank" rel="noopener" href="http://192.16.1.144:5556/api/lostFound-servic6/travel/lostFound/list">http://192.16.1.144:5556/api/lostFound-servic6/travel/lostFound/list</a></li>
<li>反向代理结果：<a target="_blank" rel="noopener" href="http://192.16.1.144:9999/travel-service/travel/lostFound/list">http://192.16.1.144:9999/travel-service/travel/lostFound/list</a></li>
</ul>
<pre><code>location ^~ /api/lostFound-servic6 &#123;
    rewrite /api/lostFound-servic6/(.*) /travel-service/$1 break;
    proxy_pass http://192.16.1.144:9999;
    proxy_redirect off;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_read_timeout 180s;
    #proxy_set_header Host $proxy_host;
&#125;
</code></pre>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/优化" style=color:#ffa2c4>
                优化
            </a>
        </span>
        
    </div>

    <a href="/2022/04/22/Nginx/Nginx使用记录/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/04/22/Nginx/Nginx安装/">
        <h2>
            Nginx部署
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/Nginx">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                Nginx
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/4/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h3 id="Nginx部署"><a href="#Nginx部署" class="headerlink" title="Nginx部署"></a>Nginx部署</h3><h5 id="1-安装依赖包"><a href="#1-安装依赖包" class="headerlink" title="1.安装依赖包"></a>1.安装依赖包</h5><pre><code>//一键安装上面四个依赖
yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel
</code></pre>
<h5 id="2-下载并解压安装包"><a href="#2-下载并解压安装包" class="headerlink" title="2.下载并解压安装包"></a>2.下载并解压安装包</h5><pre><code>//创建一个文件夹
cd /usr/local
mkdir nginx
cd nginx
//下载tar包
wget http://nginx.org/download/nginx-1.18.0.tar.gz
tar -xvf nginx-1.18.0.tar.gz
</code></pre>
<h5 id="3-安装nginx"><a href="#3-安装nginx" class="headerlink" title="3.安装nginx"></a>3.安装nginx</h5><pre><code>//进入nginx目录
cd /usr/local/nginx
//进入目录
cd nginx-1.18.0
//执行命令
./configure
//执行make命令
make
//执行make install命令
make install
</code></pre>
<h5 id="4-配置nginx-conf"><a href="#4-配置nginx-conf" class="headerlink" title="4.配置nginx.conf"></a>4.配置nginx.conf</h5><pre><code>// 打开配置文件
vim /usr/local/nginx/conf/nginx.conf
</code></pre>
<h5 id="5-启动命令"><a href="#5-启动命令" class="headerlink" title="5.启动命令"></a>5.启动命令</h5><pre><code>/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
</code></pre>
<h5 id="6-添加到环境变量"><a href="#6-添加到环境变量" class="headerlink" title="6.添加到环境变量"></a>6.添加到环境变量</h5><pre><code>ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/
</code></pre>
<p>&#x2F;usr&#x2F;local&#x2F;bin&#x2F;就是环境变量目录</p>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/部署" style=color:#00bcd4>
                部署
            </a>
        </span>
        
    </div>

    <a href="/2022/04/22/Nginx/Nginx安装/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/04/22/Nginx/Nginx缓存/">
        <h2>
            Nginx缓存
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/Nginx">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                Nginx
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/4/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h3 id="Nginx缓存"><a href="#Nginx缓存" class="headerlink" title="Nginx缓存"></a>Nginx缓存</h3><h4 id="proxy-cache-path"><a href="#proxy-cache-path" class="headerlink" title="proxy_cache_path"></a>proxy_cache_path</h4><p><strong>语法</strong>：</p>
<pre><code>proxy_cache_path path [levels=levels] keys_zone=name:size [inactive=time] [max_size=size] [loader_files=number] [loader_sleep=time] [loader_threshold=time];
默认值:    —
上下文:    http
</code></pre>
<p><strong>示例</strong>：</p>
<pre><code>proxy_cache_path /cache levels=1:2 keys_zone=cache:10m max_size=10g inactive=60m use_temp_path=off;
</code></pre>
<ul>
<li><code>path</code> 指定缓存文件目录，和 proxy_temp_path 最好设置在同一文件分区下，缓存内容是先写在 temp_path，临时文件和缓存可以放在不同的文件系统，将导致文件在这两个文件系统中进行拷贝，而不是廉价的重命名操作。因此，针对任何路径，都建议将缓存和proxy_temp_path指令设置的临时文件目录放在同一文件系统。</li>
<li><code>level</code> 定义了缓存的层次结构，每层可以用1（最多16中选择，0-f）或2（最多256种选择，00-ff）表示，中间用 [冒号] 分隔。“levels&#x3D;1:2”表示开启1、2层级(第2层级理论有16*256个目录)。</li>
</ul>
<pre><code class="haskell">proxy_cache_path /data/nginx/cache;  # 所有缓存只有一个目录
/data/nginx/cache/d7b6e5978e3f042f52e875005925e51b 

proxy_cache_path /data/nginx/cache levels=1:2;  # 第二层级有16*256=4096个目录
/data/nginx/cache/b/51/d7b6e5978e3f042f52e875005925e51b 

proxy_cache_path /data/nginx/cache levels=1:1:1; #第三层级有16*16*16个目录
/data/nginx/cache/b/1/5/d7b6e5978e3f042f52e87500592 

proxy_cache_path /data/nginx/cache levels=2; # 第一层级有256个目录
/data/nginx/cache/1b/d7b6e5978e3f042f52e875005925e51b 
</code></pre>
<ul>
<li><code>keys_zone</code> 指定一个共享内存空间zone，所有活动的键和缓存数据相关的信息都被存放在共享内存中，这样nginx可以快速判断一个request是否命中或者未命中缓存，1m可以存储8000个key，10m可以存储80000个key；</li>
<li><code>inactive</code> inactive&#x3D;30m 表示 30 分钟没有被访问的文件会被 cache manager 删除，inactive的默认值是10分钟。 需要注意的是，inactive和expired配置项的含义是不同的，expired只是缓存过期，但不会被删除，inactive是删除指定时间内未被访问的缓存文件</li>
<li><code>max_size</code> cache存储的最大尺寸，如果不指定，会用掉所有磁盘空间，当尺寸超过，将会基于LRU算法移除数据，以减少占用大小。nginx启动时，会创建一个“Cache manager”进程，通过“purge”方式移除数据。</li>
<li><code>loader_files</code> “cache loader”进程遍历文件时，每次加载的文件个数。默认为100.</li>
<li><code>loader_threshold</code> 每次遍历消耗时间上限。默认为200毫秒。</li>
<li><code>loader_sleep</code> 一次遍历之后，停顿的时间间隔，默认为50毫秒。</li>
</ul>
<h4 id="proxy-cache"><a href="#proxy-cache" class="headerlink" title="proxy_cache"></a>proxy_cache</h4><p><strong>语法</strong>：</p>
<pre><code class="css">proxy_cache zone | off;
默认值:    proxy_cache off;
上下文:    http, server, location
</code></pre>
<p>指定用于页面缓存的共享内存。同一块共享内存可以在多个地方使用。off参数可以屏蔽从上层配置继承的缓存功能。zone名称由<code>proxy_cache_path</code>指令定义。</p>
<h4 id="proxy-cache-key"><a href="#proxy-cache-key" class="headerlink" title="proxy_cache_key"></a>proxy_cache_key</h4><p><strong>语法</strong>：</p>
<pre><code class="puppet">proxy_cache_key string;
默认值:    
proxy_cache_key $scheme$proxy_host$request_uri;
上下文:    http, server, location
</code></pre>
<p>定义如何生成缓存的键，比如</p>
<pre><code class="kotlin">proxy_cache_key &quot;$host$request_uri $cookie_user&quot;;
</code></pre>
<p>这条指令的默认值类似于下面字符串</p>
<pre><code class="puppet">proxy_cache_key $scheme$proxy_host$uri$is_args$args;
</code></pre>
<p>缓存文件并不是越多越好，所以 cache_key 的设计非常关键。代理或 URL 跳转常常会添加的无用请求参数，这就会出现不同的 cache_key 保存了多份相同的缓存内容，这对缓存效果影响很大。通过 ngx_lua 可以对 URL 参数进行过滤，保证 cache_key 唯一。</p>
<h4 id="proxy-cache-valid"><a href="#proxy-cache-valid" class="headerlink" title="proxy_cache_valid"></a>proxy_cache_valid</h4><p><strong>语法</strong>：</p>
<pre><code class="css">proxy_cache_valid [code ...] time;
默认值:    —
上下文:    http, server, location
</code></pre>
<p>为不同的响应状态码设置不同的缓存时间。比如，下面指令</p>
<pre><code class="undefined">proxy_cache_valid 200 302 10m;
proxy_cache_valid 404      1m;
</code></pre>
<p>设置状态码为200和302的响应的缓存时间为10分钟，状态码为404的响应的缓存时间为1分钟。</p>
<p>如果仅仅指定了time，</p>
<pre><code class="undefined">proxy_cache_valid 5m;
</code></pre>
<p>那么只有状态码为200、300和302的响应会被缓存。</p>
<p>如果使用了any参数，那么就可以缓存任何响应：</p>
<pre><code class="r">proxy_cache_valid 200 302 10m;
proxy_cache_valid 301      1h;
proxy_cache_valid any      1m;
</code></pre>
<p>缓存参数也可以直接在响应头中设定。这种方式的优先级高于使用这条指令设置缓存时间。</p>
<blockquote>
<p>“X-Accel-Expires”响应头可以以秒为单位设置响应的缓存时间，如果值为0，表示禁止缓存响应，如果值以@开始，表示自1970年1月1日以来的秒数，响应一直会被缓存到这个绝对时间点。</p>
<p>如果不含“X-Accel-Expires”响应头，缓存参数仍可能被“Expires”或者“Cache-Control”响应头设置。</p>
<p>如果响应头含有“Set-Cookie”，响应将不能被缓存。 这些头的处理过程可以使用指令proxy_ignore_headers忽略。</p>
</blockquote>
<h4 id="proxy-ignore-headers"><a href="#proxy-ignore-headers" class="headerlink" title="proxy_ignore_headers"></a>proxy_ignore_headers</h4><p><strong>语法</strong>：</p>
<pre><code class="css">proxy_ignore_headers field ...;
默认值:    —
上下文:    http, server, location
</code></pre>
<p>指定来自后端server的响应中的某些header不会被处理，如下几个fields可以被ignore：“X-Accel-Redirect”、“X-Accel-Expires”、“X-Accel-Limit-Rate”、“X-Accel-Buffering”、“X-Accel-Charset”、“Expires”、“Cache-Control”、“Set-Cookie”、“Vary”。“不被处理”就是nginx不会尝试解析这些header并应用它们，比如nginx处理来自后端server的“Expires”，将会影响它本地的文件cache的机制</p>
<p>如果不被取消，这些头部的处理可能产生下面结果：</p>
<blockquote>
<p>“X-Accel-Expires”，“Expires”，“Cache-Control”，和“Set-Cookie” 设置响应缓存的参数；</p>
<p>“X-Accel-Redirect”执行到指定URI的内部跳转；</p>
<p>“X-Accel-Limit-Rate”设置响应到客户端的传输速率限制；</p>
<p>“X-Accel-Buffering”启动或者关闭响应缓冲；</p>
<p>“X-Accel-Charset”设置响应所需的字符集。</p>
</blockquote>
<h4 id="proxy-hide-header"><a href="#proxy-hide-header" class="headerlink" title="proxy_hide_header"></a>proxy_hide_header</h4><p><strong>语法</strong>：</p>
<pre><code class="css">proxy_hide_header field;
默认值:    —
上下文:    http, server, location
</code></pre>
<p>nginx默认不会将“Date”、“Server”、“X-Pad”，和“X-Accel-…”响应头发送给客户端。proxy_hide_header指令则可以设置额外的响应头，这些响应头也不会发送给客户端。相反的，如果希望允许传递某些响应头给客户端，可以使用proxy_pass_header指令。</p>
<h4 id="proxy-pass-header"><a href="#proxy-pass-header" class="headerlink" title="proxy_pass_header"></a>proxy_pass_header</h4><p><strong>语法</strong>：</p>
<pre><code class="css">proxy_pass_header field;
默认值:    —
上下文:    http, server, location
</code></pre>
<p>允许传送被屏蔽的后端服务器响应头到客户端。</p>
<h4 id="proxy-cache-min-uses"><a href="#proxy-cache-min-uses" class="headerlink" title="proxy_cache_min_uses"></a>proxy_cache_min_uses</h4><pre><code class="css">proxy_cache_min_uses number;
默认值:    proxy_cache_min_uses 1;
上下文:    http, server, location
</code></pre>
<p>设置响应被缓存的最小请求次数。默认为1，当客户端发送相同请求达到规定次数后，nginx才对响应数据进行缓存；指定请求至少被发送了多少次以上时才缓存，可以防止低频请求被缓存</p>
<h4 id="proxy-cache-use-stale"><a href="#proxy-cache-use-stale" class="headerlink" title="proxy_cache_use_stale"></a>proxy_cache_use_stale</h4><p><strong>语法</strong>：</p>
<pre><code class="vbnet">proxy_cache_use_stale error | timeout | invalid_header | updating | http_500 | http_502 | http_503 | http_504 | http_404 | off ...;
默认值:    proxy_cache_use_stale off;
上下文:    http, server, location
</code></pre>
<p>如果后端服务器出现状况，nginx是可以使用过期的响应缓存的。这条指令就是定义何种条件下允许开启此机制。这条指令的参数与proxy_next_upstream指令的参数相同。</p>
<p>此外，updating参数允许nginx在正在更新缓存的情况下使用过期的缓存作为响应。这样做可以使更新缓存数据时，访问源服务器的次数最少。</p>
<p>在植入新的缓存条目时，如果想使访问源服务器的次数最少，可以使用proxy_cache_lock指令。</p>
<h4 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30795127/article/details/97385091#proxy_cache_valid">https://blog.csdn.net/weixin_30795127/article/details/97385091#proxy_cache_valid</a></p>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/优化" style=color:#03a9f4>
                优化
            </a>
        </span>
        
    </div>

    <a href="/2022/04/22/Nginx/Nginx缓存/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/04/22/Nginx/Nginx配置成Windows服务/">
        <h2>
            将Nginx注册为windows系统服务
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/Nginx">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                Nginx
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/4/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h3 id="将Nginx注册为windows系统服务"><a href="#将Nginx注册为windows系统服务" class="headerlink" title="将Nginx注册为windows系统服务"></a>将Nginx注册为windows系统服务</h3><ul>
<li>在项目主页内找到winsw的下载页面（我用的是最新2.0.2版本，你可以下载最新的）</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/2.0.2/">http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/2.0.2/</a></p>
<p>下载的文件：winsw-2.9.0-bin.exe</p>
<ul>
<li>nginx项目页面下载nginx windows版本</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://nginx.org/">http://nginx.org</a></p>
<p>把nginx压缩包解压放到指定目录，例如我放的是d盘根目录。特别强调路径不要带空格的，否则会启动失败。</p>
<p>nginx安装目录是：<code>E:\myProgram\nginx-1.14.0</code></p>
<ul>
<li><p>将winsw-2.9.0-bin.exe复制到nginx目录：E:\myProgram\nginx-1.14.0，并将其改成nginx-service.exe </p>
</li>
<li><p>新建一个xml文件nginx-service.xml，名称一定要与上面的.exe上的文件名一致的哦。文件内容如下：</p>
</li>
</ul>
<pre><code>&lt;service&gt;
  &lt;id&gt;nginx&lt;/id&gt;
  &lt;name&gt;nginx&lt;/name&gt;
  &lt;description&gt;nginx&lt;/description&gt;
  &lt;env name=&quot;path&quot; value=&quot;E:\myProgram\nginx-1.14.0&quot;/&gt;
  &lt;executable&gt;E:/myProgram/nginx-1.14.0/nginx.exe&lt;/executable&gt;
  &lt;arguments&gt;-p E:/myProgram/nginx-1.14.0&lt;/arguments&gt;
  &lt;logpath&gt;E:/myProgram/nginx-1.14.0/logs/&lt;/logpath&gt;
  &lt;logmode&gt;roll&lt;/logmode&gt;
&lt;/service&gt;
</code></pre>
<ul>
<li>运行Windows cmd命令，进入nginx目录：运行nginx-service.exe install将其注册为windws系统服务。当配置错误（就是系统服务中有了但是启动不了）或者是要卸载它的时候运行：nginx-service.exe uninstall</li>
</ul>
<p>​		再运行Windows cmd命令，输入services.msc,就可以在系统服务中看到nginx服务，右击启动就可以了，访问<a href="http://localhost:8088出现nginx页面，安装成功。">http://localhost:8088出现nginx页面，安装成功。</a> 因为我这台电脑80端口被占用了，然后就使用了8088端口</p>
<p>​		如果出现错误信息，可在nginx的日志文件logs查看。刚开始在测试时一直启动服务失败，原因是按照网络上的（旧版）配置文件启动不成功，希望可以少让大家走一些弯路，当时我心里的那个苦啊，没有找到正确的话，捣鼓的让你欲哭无泪。旧版的配置文件如下（注意与4中对比）：</p>
<h3 id><a href="#" class="headerlink" title></a></h3>
            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/优化" style=color:#03a9f4>
                优化
            </a>
        </span>
        
    </div>

    <a href="/2022/04/22/Nginx/Nginx配置成Windows服务/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2019/03/22/Git/sshkey内容配置/">
        <h2>
            sshkey内容配置
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/Git">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                Git
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2019/3/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <blockquote>
<p>ssh-keygen -t rsa -C <a href="mailto:&#x64;&#x75;&#x78;&#x66;&#x40;&#113;&#x64;&#x63;&#97;&#x72;&#x65;&#115;&#x2e;&#x63;&#x6e;">&#x64;&#x75;&#x78;&#x66;&#x40;&#113;&#x64;&#x63;&#97;&#x72;&#x65;&#115;&#x2e;&#x63;&#x6e;</a> -b 1024<br>在git bash中使用上面的命令生成rsa公私钥，部分软件类似winscp要求使用ppk类型的私钥，需要使用puttygen工具进行转换即可</p>
</blockquote>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/Git基础" style=color:#03a9f4>
                Git基础
            </a>
        </span>
        
    </div>

    <a href="/2019/03/22/Git/sshkey内容配置/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2018/09/03/MySql/MySql常见错误整理/">
        <h2>
            MySql常见错误整理
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/MySql">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                MySql
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2018/9/3
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <p>mysql数据库时间和本地时间相差13个小时，原因是mysql默认使用的是CST市区，这个是美国中部时间，和北京时间刚好相差13个小时<br>修改方法就是在<code>/etc/my.cnf</code>文件中添加一行代码即可。</p>
<pre><code>default-time-zone = &#39;+08:00&#39; 
</code></pre>
<p>添加完成记得重启下mysql服务</p>
<pre><code>[root@VM_94_149_centos home]# service mysqld restart
</code></pre>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/MySql" style=color:#03a9f4>
                MySql
            </a>
        </span>
        
    </div>

    <a href="/2018/09/03/MySql/MySql常见错误整理/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2018/08/22/MySql/GROUPBY小记/">
        <h2>
            GROUP BY小记
        </h2>
    </a>

    <div class="category-and-date">

        
        <span class="category">
            <a href="/categories/MySql">
                <span class="icon">
                    <a-icon type="book" theme="filled" /></span>
                MySql
            </a>
        </span>
        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2018/8/22
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>“Group By”从字面意义上理解就是根据“By”指定的规则对数据进行分组，所谓的分组就是将一个“数据集”划分成若干个“小区域”，然后针对若干个“小区域”进行数据处理。</li>
<li>下面的表是原始数据，接下来的例子都是基于这张表演示的。<br><img src="/assets/images/MySql/mysql_group_by_1.png" alt="原始表"></li>
</ul>
<hr>
<h3 id="简单Group-By"><a href="#简单Group-By" class="headerlink" title="简单Group By"></a>简单Group By</h3><pre><code class="sql">select 类别, sum(数量) as 数量之和  
from A  
group by 类别  
</code></pre>
<p>返回结果如下表，实际上就是分类汇总。<br><img src="/assets/images/MySql/mysql_group_by_2.png" alt="简单GROUP BY"></p>
<h3 id="Group-By-和-Order-By"><a href="#Group-By-和-Order-By" class="headerlink" title="Group By 和 Order By"></a>Group By 和 Order By</h3><pre><code class="sql">select 类别, sum(数量) AS 数量之和
from A
group by 类别
order by sum(数量) desc
</code></pre>
<p>返回结果如下表<br><img src="/assets/images/MySql/mysql_group_by_3.png" alt="添加 Order By"></p>
<h3 id="Group-By-All"><a href="#Group-By-All" class="headerlink" title="Group By All"></a>Group By All</h3><pre><code class="sql">select 类别, 摘要, sum(数量) as 数量之和
from A
group by all 类别, 摘要
</code></pre>
<p>这种方式可以多指定一个列，多个列都相同才会被分到同一组。<br>SQL中多指定“摘要”字段，其原因在于“多列分组”中包含了“摘要字段”，其执行结果如下表<br><img src="/assets/images/MySql/mysql_group_by_4.png" alt="Group By All"></p>
<h3 id="Group-By与聚合函数"><a href="#Group-By与聚合函数" class="headerlink" title="Group By与聚合函数"></a>Group By与聚合函数</h3><p><img src="/assets/images/MySql/mysql_group_by_8.jpg" alt="Group By All"></p>
<h3 id="Having与Where的区别"><a href="#Having与Where的区别" class="headerlink" title="Having与Where的区别"></a>Having与Where的区别</h3><ul>
<li>where 子句的作用是在对查询结果进行分组前，将不符合where条件的行去掉，即在分组之前过滤数据，where条件中不能包含聚组函数，使用where条件过滤出特定的行。</li>
<li>having 子句的作用是筛选满足条件的组，即在分组之后过滤数据，条件中经常包含聚组函数，使用having 条件过滤出特定的组，也可以使用多个分组标准进行分组。<pre><code class="sql">select 类别, sum(数量) as 数量之和 from A
group by 类别
having sum(数量) &gt; 18
</code></pre>
上面的SQL语句执行时会正确筛选出接过来，如果吧having替换成where则会报错<h3 id="Compute"><a href="#Compute" class="headerlink" title="Compute"></a>Compute</h3><pre><code class="sql">select *
from A
where 数量&gt;8
compute max(数量),min(数量),avg(数量)
</code></pre>
执行效果如下<br><img src="/assets/images/MySql/mysql_group_by_6.png" alt="Compute"><h3 id="Compute-By"><a href="#Compute-By" class="headerlink" title="Compute By"></a>Compute By</h3><pre><code class="sql">select *
from A
where 数量&gt;8
order by 类别
compute max(数量),min(数量),avg(数量) by 类别
</code></pre>
执行效果如下<br><img src="/assets/images/MySql/mysql_group_by_7.png" alt="Compute"></li>
</ul>

            
        </div>
    </div>

    <div class="post-tags">
        
        <span class="icon">
            <a-icon type="tags" theme="filled" />
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/MySql" style=color:#03a9f4>
                MySql
            </a>
        </span>
        
    </div>

    <a href="/2018/08/22/MySql/GROUPBY小记/ " class="go-post">
        阅读全文
    </a>
</div>


             
<div class="page-current">

    <div class="prev">
        
    </div>

    <div class="page-index">

        

        <span class="current">
            1
        </span>

        
        <span>
            <a href="/page/2/">
                <span class="page-num">
                    2
                </span>
            </a>
            

            

        </span>
        

    </div>

    <div class="next">
        
        <a href="/page/2/ ">
            <span class="page-num">
                <a-icon type="caret-right" theme="filled" />
            </span>
        </a>
        
    </div>

</div>

        </div>
    </div>
    
    <div id="home-card">
        <a-affix :offset-top="card_top">
    <a-card class="card-style" style="width: 300px">
        <div class="avatar">
            <img src="images/head_image.jpg " alt="头像">
        </div>
        <div class="name">
            Eric Du
        </div>
        <div class="descriptions">
            
            <div class="description">
                人生天地间，忽如远行客
            </div>
            
        </div>
        <div class="icon-links">
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://github.com/ericdxf">

                    
                    <a-icon type="github"
                        theme="filled" />
                    
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://twitter.com/korilin_dev">

                    
                    <a-icon type="twitter"
                        theme="" />
                    
                </a>
            </span>
            
        </div>
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://en.korilin.com">
                    英文技术博客
                </a>
            </div>
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://jp.korilin.com">
                    日语记录博客
                </a>
            </div>
            
        </div>
    </a-card>
</a-affix>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2022 Eric的博客
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Eric Du
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

</body>

</html>